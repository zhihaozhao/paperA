# 🎯 代码生成和文档编写核心原则

## 📋 基于真实材料的生成准则

### ⚡ 核心要求：**拒绝假设，基于事实**

任何代码、文档、分析、说明的生成都**必须**基于：

#### ✅ 可接受的依据源
1. **真实的代码文件** - 通过`read_file`、`grep`等工具读取的实际文件内容
2. **实际的实验数据** - 基于真实运行结果和日志输出  
3. **已有的论文材料** - 引用项目中实际存在的文档内容
4. **用户明确提供的信息** - 用户直接描述或确认的事实

#### ❌ 严格禁止的行为
- **不能基于推测或假设** 生成配置、参数、模型名称等
- **不能编造不存在的数据** 如实验数量、性能指标等
- **不能臆测项目结构** 如目录名称、文件格式等
- **不能假设实验设计** 如sweep参数、模型架构等

### 🔍 必须遵循的工作流程

#### 1. **信息收集阶段**
```
优先级: 实际文件 > 用户确认 > 询问澄清
- 先用 read_file/grep 查看相关文件
- 如果文件不存在或内容不明确，询问用户
- 绝不基于"常见惯例"或"合理推测"填补空白
```

#### 2. **内容生成阶段** 
```
每个具体数字、名称、配置都要有明确来源：
✅ "根据 scripts/d2_spec.json，实验数为 4×5×3×3×3=540个"
❌ "通常D2实验包含约100个配置"
```

#### 3. **验证确认阶段**
```
生成后主动验证：
- 重新检查引用的文件内容
- 对关键数字进行二次确认  
- 如有疑虑，明确标注并询问用户
```

### 📚 经验教训案例

#### 🚨 错误示例：D2实验文档假设错误
**问题**：最初基于假设生成D2实验文档
- 假设实验数量：96个 (4×8×3)
- 假设模型名称：lstm, tcn, txf
- 假设参数空间：difficulty sweep

**现实**：查看实际`scripts/d2_spec.json`后发现
- 真实实验数量：540个 (4×5×3×3×3)  
- 真实模型名称：enhanced, cnn, bilstm, conformer_lite
- 真实参数空间：class_overlap × label_noise_prob × env_burst_rate

**损失**：错误文档误导用户，需要大量修正工作

#### ✅ 正确做法
1. **先读取文件**：`read_file scripts/d2_spec.json`
2. **基于实际内容生成**：准确反映540个实验配置
3. **交叉验证**：检查相关脚本确保一致性

### 🛡️ 不确定性处理原则

#### 遇到不明确信息时：
1. **立即停止假设** - 不继续基于猜测生成内容
2. **明确标注疑问** - "无法确认以下信息..."  
3. **主动询问用户** - "请提供...的具体配置"
4. **提供检查建议** - "建议查看...文件确认"

#### 标准询问模板：
```
❓ 无法确定 [具体信息]，请确认：
- 是否存在相关配置文件？
- 实际的参数/模型/数量是？  
- 是否有参考文档可查阅？

避免基于假设继续，请提供准确信息。
```

### 🎯 质量保证检查点

生成任何技术文档前，自检：
- [ ] 所有数字都有明确来源
- [ ] 所有文件名都已验证存在  
- [ ] 所有配置都基于实际代码
- [ ] 不确定的地方已明确标注
- [ ] 关键假设已向用户确认

### 📝 文档更新日志

**2025-08-17**: 基于D2实验配置错误教训，制定此原则文档
- 背景：假设错误导致96→540实验数修正
- 目标：确保未来所有生成基于真实材料
- 适用：代码、文档、配置、分析等所有内容生成

---

**🔑 核心铭记**：宁可询问确认，也不基于假设生成错误内容。真实性是技术文档的生命线。